extends layout

block content

  include _header

  .container
    form(role='form', method='post', action='/upload', enctype='multipart/form-data')

      .form-group
        label(for='userFile') File
        input#userFile.form-control(type='file', name='userFile' style='display: none;')
        .input-group
          input#uploadField.form-control(type='text', disabled='disabled')
          .input-group-btn
            a.btn.btn-primary(onclick='$(\'input[id=userFile]\').click();') Browse

      .form-group
        label(for='exampleInputEmail1') Tags
        input.form-control(name='tags', id='tags')

      button.ladda-button(data-style='expand-right', data-color='mint', type='submit')
        span.ladda-label Upload

  script.
    $('input[id=userFile]').change(function() {
      $('#uploadField').val($(this).val());
    });

  script.
    $(function() {
      $('#tags').tagsInput({
        'width': '100%'
      });

      if ('#{message}') {
        humane.log('#{message}');
      }
    });
  script.
    Ladda.bind('button[type=submit]', {
      callback: function( instance ) {
        var progress = 0;
        var interval = setInterval( function() {
          progress = Math.min( progress + Math.random() * 0.1, 1 );
          instance.setProgress( progress );

          if( progress === 1 ) {
            instance.stop();
            clearInterval( interval );
          }
        }, 200 );
      }
    } );
